<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Web3 Contract Interaction</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@4.2.3-dev.b3ccd5c.0/dist/web3.min.js"></script>

    <script>
		const contractAddress = "0x674C18bD1eF0d273bF87C9dce477c874e49B61c0";

		// RPC URL
		const rpcURL = "https://rpc.titan-goerli.tokamak.network";


		// Smart contact ABI
		const contractABI = [{"type":"constructor","stateMutability":"nonpayable","inputs":[{"type":"uint256","name":"_entranceFee","internalType":"uint256"}]},{"type":"event","name":"CalculatedOmega","inputs":[{"type":"uint256","name":"round","internalType":"uint256","indexed":false},{"type":"uint256","name":"omega","internalType":"uint256","indexed":false},{"type":"uint256","name":"calculatedTimestamp","internalType":"uint256","indexed":false},{"type":"bool","name":"isCompleted","internalType":"bool","indexed":false}],"anonymous":false},{"type":"event","name":"CommitC","inputs":[{"type":"address","name":"participant","internalType":"address","indexed":false},{"type":"uint256","name":"commit","internalType":"uint256","indexed":false},{"type":"string","name":"commitsString","internalType":"string","indexed":false},{"type":"uint256","name":"commitCount","internalType":"uint256","indexed":false},{"type":"uint256","name":"commitTimestamp","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"RaffleEntered","inputs":[{"type":"address","name":"_entrant","internalType":"address","indexed":true},{"type":"uint256","name":"_amount","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"RaffleWinner","inputs":[{"type":"address","name":"_winner","internalType":"address","indexed":true},{"type":"uint256","name":"_round","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"Recovered","inputs":[{"type":"address","name":"msgSender","internalType":"address","indexed":false},{"type":"uint256","name":"recov","internalType":"uint256","indexed":false},{"type":"uint256","name":"omegaRecov","internalType":"uint256","indexed":false},{"type":"uint256","name":"recoveredTimestamp","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"RevealA","inputs":[{"type":"address","name":"participant","internalType":"address","indexed":false},{"type":"uint256","name":"a","internalType":"uint256","indexed":false},{"type":"uint256","name":"revealLeftCount","internalType":"uint256","indexed":false},{"type":"uint256","name":"revealTimestamp","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"event","name":"Start","inputs":[{"type":"address","name":"msgSender","internalType":"address","indexed":false},{"type":"uint256","name":"startTime","internalType":"uint256","indexed":false},{"type":"uint256","name":"commitDuration","internalType":"uint256","indexed":false},{"type":"uint256","name":"commitRevealDuration","internalType":"uint256","indexed":false},{"type":"uint256","name":"n","internalType":"uint256","indexed":false},{"type":"uint256","name":"g","internalType":"uint256","indexed":false},{"type":"uint256","name":"h","internalType":"uint256","indexed":false},{"type":"uint256","name":"T","internalType":"uint256","indexed":false},{"type":"uint256","name":"round","internalType":"uint256","indexed":false}],"anonymous":false},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"balance","internalType":"uint256"}],"name":"balancesAtRound","inputs":[{"type":"uint256","name":"round","internalType":"uint256"}]},{"type":"function","stateMutability":"nonpayable","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"calculateOmega","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"checkStage","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"commitDuration","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"commitRevealDuration","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"c","internalType":"uint256"},{"type":"uint256","name":"a","internalType":"uint256"},{"type":"address","name":"participantAddress","internalType":"address"}],"name":"commitRevealValues","inputs":[{"type":"uint256","name":"round","internalType":"uint256"},{"type":"uint256","name":"index","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"string","name":"","internalType":"string"}],"name":"commitsString","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"count","inputs":[]},{"type":"function","stateMutability":"payable","outputs":[],"name":"enterRafByCommit","inputs":[{"type":"uint256","name":"_commit","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"entranceFee","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"getWinnerAddress","inputs":[{"type":"uint256","name":"_round","internalType":"uint256"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"recover","inputs":[{"type":"uint256","name":"_round","internalType":"uint256"},{"type":"tuple[]","name":"proofs","internalType":"struct Pietrzak_VDF.VDFClaim[]","components":[{"type":"uint256","name":"n","internalType":"uint256"},{"type":"uint256","name":"x","internalType":"uint256"},{"type":"uint256","name":"y","internalType":"uint256"},{"type":"uint256","name":"T","internalType":"uint256"},{"type":"uint256","name":"v","internalType":"uint256"}]}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"reveal","inputs":[{"type":"uint256","name":"_a","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"round","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint8","name":"","internalType":"enum CommitRecover.Stages"}],"name":"stage","inputs":[]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"start","inputs":[{"type":"uint256","name":"_commitDuration","internalType":"uint256"},{"type":"uint256","name":"_commitRevealDuration","internalType":"uint256"},{"type":"uint256","name":"_n","internalType":"uint256"},{"type":"tuple[]","name":"_proofs","internalType":"struct Pietrzak_VDF.VDFClaim[]","components":[{"type":"uint256","name":"n","internalType":"uint256"},{"type":"uint256","name":"x","internalType":"uint256"},{"type":"uint256","name":"y","internalType":"uint256"},{"type":"uint256","name":"T","internalType":"uint256"},{"type":"uint256","name":"v","internalType":"uint256"}]}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"startTime","inputs":[]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"index","internalType":"uint256"},{"type":"bool","name":"committed","internalType":"bool"},{"type":"bool","name":"revealed","internalType":"bool"}],"name":"userInfosAtRound","inputs":[{"type":"address","name":"owner","internalType":"address"},{"type":"uint256","name":"round","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"uint256","name":"omega","internalType":"uint256"},{"type":"uint256","name":"bStar","internalType":"uint256"},{"type":"uint256","name":"numOfParticipants","internalType":"uint256"},{"type":"uint256","name":"g","internalType":"uint256"},{"type":"uint256","name":"h","internalType":"uint256"},{"type":"uint256","name":"n","internalType":"uint256"},{"type":"uint256","name":"T","internalType":"uint256"},{"type":"bool","name":"isCompleted","internalType":"bool"},{"type":"bool","name":"isAllRevealed","internalType":"bool"}],"name":"valuesAtRound","inputs":[{"type":"uint256","name":"round","internalType":"uint256"}]},{"type":"function","stateMutability":"view","outputs":[{"type":"address","name":"winnerAddress","internalType":"address"}],"name":"winnerAddresses","inputs":[{"type":"uint256","name":"round","internalType":"uint256"}]},{"type":"function","stateMutability":"nonpayable","outputs":[],"name":"withdraw","inputs":[{"type":"uint256","name":"_round","internalType":"uint256"}]}];
		
        // Asynchronous function to interact with the contract
        async function interactWithContract() {
            try {

                const web3Test = new Web3(rpcURL);
                const contract = new web3Test.eth.Contract(contractABI, contractAddress);

                const r = await contract.methods.round().call();
                document.getElementById('output').innerText = `Value of r: ${r}`;
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('output').innerText = 'fail';
            }
        }
    </script>


</head>
<body>
    <h1>Web3 Contract Interaction</h1>
    <button onclick="interactWithContract()">Interact with Contract</button>
    <p id="output"></p>
</body>
</html>
